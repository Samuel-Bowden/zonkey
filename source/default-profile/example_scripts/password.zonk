# Asks user to create a password and then use that to login

function print_split() {
	println("-----------------");
}

function register() -> String {
	print_split();
	println("Register");

	let password = "";

	loop {
		password = prompt("Enter password for new account:");

		if (password != "") {
			break;
		}

		println("Password must not be empty");
	}

	return password;
}

function login(String password) -> Boolean {
	print_split();
	println("Login");

	let attempts = 3;

	loop {	
		let entered_password = prompt("Enter password:");

		if (entered_password == password) {
			return true;
		}

		attempts -= 1;

		println("");
		print("Wrong password, remaining attempts: ");
		print(attempts);
		println("");

		if (attempts == 0) {
			return false;
		}
	}
}

start {
	let password = register();

	let successful = login(password);

	print_split();

	if (successful) {
		println("Login successful, welcome");
	} else {
		println("Login failed");
	}
}
