# Asks user to create a password and then use that to login

start {
	let password = register();

	if (login(password)) {
		cli::println("Login successful, welcome");
	} else {
		cli::println("Login failed");
	}
}

function register() -> String {
	cli::println("-----------------");
	cli::println("Register");

	let password = "";

	loop {
		password = cli::prompt("Enter password for new account:");

		if (password != "") {
			break;
		}

		cli::println("Password must not be empty");
	}

	return password;
}

function login(String password) -> Boolean {
	cli::println("-----------------");
	cli::println("Login");

	let attempts = 3;

	let status = false;

	loop {	
		let entered_password = cli::prompt("Enter password:");

		if (entered_password == password) {
			status = true;
			break;
		}

		attempts -= 1;

		cli::println();
		cli::print("Wrong password, remaining attempts: ");
		cli::print(attempts);
		cli::println();

		if (attempts == 0) {
			status = false;
			break;
		}
	}
	cli::println("-----------------");

	return status;
}
