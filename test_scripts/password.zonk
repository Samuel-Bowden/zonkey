# Asks user to create a password and then use that to login

function print_split() {
	cli:println("-----------------");
}

function register() -> String {
	print_split();
	cli:println("Register");

	let password = "";

	loop {
		password = cli:prompt("Enter password for new account:");

		if (password != "") {
			break;
		}

		cli:println("Password must not be empty");
	}

	return password;
}

function login(String password) -> Boolean {
	print_split();
	cli:println("Login");

	let attempts = 3;

	loop {	
		let entered_password = cli:prompt("Enter password:");

		if (entered_password == password) {
			return true;
		}

		attempts -= 1;

		cli:println();
		cli:print("Wrong password, remaining attempts: ");
		cli:print(attempts);
		cli:println();

		if (attempts == 0) {
			return false;
		}
	}
}

start {
	let password = register();

	let successful = login(password);

	print_split();

	if (successful) {
		cli:println("Login successful, welcome");
	} else {
		cli:println("Login failed");
	}
}
